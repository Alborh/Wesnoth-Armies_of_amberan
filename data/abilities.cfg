#define ABILITY_INSPIRATION
    # Canned definition of the Leadership ability to be included in an
    # [abilities] clause.
	[leadership]
     		id=inspiration
     		value="(25 * (level + 1 - other.level))"
     		cumulative=no
     		name= _ "inspiration"
     		female_name= _ "female^inspiration"
     		description= _ "Like leadership but with level +1 for the leading unit"
    		affect_self=no
		affect_allies=yes
   		affect_enemies=no
       	[affect_adjacent]
           	[filter]
           	     formula="level <= other.level"
            	[/filter]
        	[/affect_adjacent]
    	[/leadership]
#enddef

#define ABILITY_DISCIPLINE
   [leadership]
   id=aoadiscipline
   value=25
   cumulative=no
   name=_"discipline"
   description=_"Protects friendly units from time-of-day penalties. These units fight as if there was a neutral or their favorable time of day."
   affect_self=no
   affect_allies=yes
   affect_enemies=no
   [affect_adjacent]
      adjacent=n,ne,se,s,sw,nw
	  [filter]
		alignment=lawful
		[filter_location]
			time_of_day_id=first_watch
		[/filter_location]
	  [/filter]
	[/affect_adjacent]
   [/leadership]
   [leadership]
   id=eeawdiscipline
   value=25
   cumulative=no
   affect_self=no
   affect_allies=yes
   affect_enemies=no
   [affect_adjacent]
      adjacent=n,ne,se,s,sw,nw
	  [filter]
		alignment=lawful
		[filter_location]
			time_of_day_id=second_watch
		[/filter_location]
	  [/filter]
	[/affect_adjacent]
   [/leadership]
#enddef

#define ABILITY_FORMATION
    [resistance]
        id=aoaformation
        add=10
        max_value=40
        apply_to=blade,pierce,impact,fire,cold,arcane
        name= _ "formation"
        description=_"This unit gets +10% bonus to all resistances (up to a maximum of 40%) if there are other units with this ability standing next to him."
        affect_self=yes
        affect_allies=no
		[filter_self]
			[filter_adjacent]
				count=1
				ability=aoaformation
				is_enemy=false
			[/filter_adjacent]
			[not]
				[filter_location]
					terrain=*^F*
					[or]
						terrain=*^Uf
					[/or]
				[/filter_location]
			[/not]
		[/filter_self]
    [/resistance]
	[resistance]
        id=aoaformation
        add=20
        max_value=40
        apply_to=blade,pierce,impact,fire,cold,arcane
        affect_self=yes
        affect_allies=no
		[filter_self]
			[filter_adjacent]
				count=2
				ability=aoaformation
				is_enemy=false
			[/filter_adjacent]
			[not]
				[filter_location]
					terrain=*^F*
					[or]
						terrain=*^Uf
					[/or]
				[/filter_location]
			[/not]
		[/filter_self]
    [/resistance]
	[resistance]
        id=aoaformation
        add=30
        max_value=40
        apply_to=blade,pierce,impact,fire,cold,arcane
        affect_self=yes
        affect_allies=no
		[filter_self]
			[filter_adjacent]
				count=3
				ability=aoaformation
				is_enemy=false
			[/filter_adjacent]
			[not]
				[filter_location]
					terrain=*^F*
					[or]
						terrain=*^Uf
					[/or]
				[/filter_location]
			[/not]
		[/filter_self]
    [/resistance]
	[resistance]
        id=aoaformation
        add=40
        max_value=40
        apply_to=blade,pierce,impact,fire,cold,arcane
        affect_self=yes
        affect_allies=no
		[filter_self]
			[filter_adjacent]
				count=4
				ability=aoaformation
				is_enemy=false
			[/filter_adjacent]
			[not]
				[filter_location]
					terrain=*^F*
					[or]
						terrain=*^Uf
					[/or]
				[/filter_location]
			[/not]
		[/filter_self]
    [/resistance]
#enddef

